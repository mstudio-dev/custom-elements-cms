{% extends 'base.html.twig' %}

{% block title %}{{ news.title }} - Custom Elements CMS{% endblock %}

{% block meta_description %}{{ news.effectiveMetaDescription }}{% endblock %}

{% block meta_tags %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "NewsArticle",
  "headline": "{{ news.effectiveMetaTitle|e('js') }}",
  "description": "{{ news.effectiveMetaDescription|e('js') }}",
  "datePublished": "{{ news.publishedAt|date('c') }}",
  "dateModified": "{{ news.createdAt|date('c') }}",
  {% if news.author %}
  "author": {
    "@type": "Person",
    "name": "{{ news.author|e('js') }}"
  },
  {% endif %}
  {% if images is not empty and images[0] and images[0].path %}
  "image": "{{ absolute_url('/uploads/' ~ images[0].path) }}",
  {% endif %}
  "publisher": {
    "@type": "Organization",
    "name": "Custom Elements CMS"
  }
}
</script>
{% endblock %}

{% block body %}
<div class="container my-5">
    <article>
        <header class="mb-4">
            <h1 class="mb-3">{{ news.title }}</h1>
            <p class="text-muted">
                <time datetime="{{ news.publishedAt|date('Y-m-d') }}">
                    üìÖ {{ news.publishedAt|date('d.m.Y H:i') }} Uhr
                </time>
                {% if news.author %}
                    <span class="ms-3">‚úçÔ∏è {{ news.author }}</span>
                {% endif %}
            </p>
        </header>

        {% if images is not empty and images[0] and images[0].path %}
            <img src="/uploads/{{ images[0].path }}" alt="{{ news.title }}" class="img-fluid rounded mb-4" loading="eager">
        {% endif %}

        <div class="mb-4">
            {{ news.content|nl2br }}
        </div>

        {% if images|length > 1 %}
            <div class="mb-4">
                <h2 class="h4 mb-3">Weitere Bilder</h2>
                <div class="row row-cols-2 row-cols-md-3 g-3">
                    {% for image in images[1:] %}
                        {% if image and image.path %}
                            <div class="col">
                                <img src="/uploads/{{ image.path }}" alt="{{ news.title }}" class="img-fluid rounded" loading="lazy">
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        {% endif %}

        <div class="mt-5">
            <a href="{{ path('news_index') }}" class="btn btn-outline-primary">‚Üê Zur√ºck zur √úbersicht</a>
        </div>
    </article>
</div>
{% endblock %}
